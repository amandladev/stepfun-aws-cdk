{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.212.0"},"children":{"StepFunStack":{"id":"StepFunStack","path":"StepFunStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.212.0"},"children":{"ErrorTopic":{"id":"ErrorTopic","path":"StepFunStack/ErrorTopic","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Topic","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"StepFunStack/ErrorTopic/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnTopic","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Topic","aws:cdk:cloudformation:props":{}}},"tu-email@ejemplo.com":{"id":"tu-email@ejemplo.com","path":"StepFunStack/ErrorTopic/tu-email@ejemplo.com","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.Subscription","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"StepFunStack/ErrorTopic/tu-email@ejemplo.com/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_sns.CfnSubscription","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::SNS::Subscription","aws:cdk:cloudformation:props":{"endpoint":"tu-email@ejemplo.com","protocol":"email","topicArn":{"Ref":"ErrorTopicA0904A23"}}}}}}}},"ValidarInventarioLambda":{"id":"ValidarInventarioLambda","path":"StepFunStack/ValidarInventarioLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"StepFunStack/ValidarInventarioLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"StepFunStack/ValidarInventarioLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"StepFunStack/ValidarInventarioLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Resource":{"id":"Resource","path":"StepFunStack/ValidarInventarioLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        exports.handler = async (event) => {\n          console.log('Validando inventario para:', JSON.stringify(event));\n          \n          // Extraer datos del evento\n          const { productoId, cantidad } = event;\n          \n          // Simular validación de inventario\n          const inventarioDisponible = Math.floor(Math.random() * 100) + 1;\n          \n          // Simula error A (falta de inventario) para probar reintentos\n          if (event.forceErrorA || cantidad > inventarioDisponible) {\n            const err = new Error('Inventario insuficiente');\n            err.name = 'ErrorA';\n            throw err;\n          }\n\n          if (event.forceErrorB) {\n            console.log('ERROR FORZADO: ErrorB activado');\n            const err = new Error('Pago rechazado - error forzado para pruebas');\n            err.name = 'ErrorB';\n            throw err;\n          }\n          \n          return {\n            productoId,\n            cantidad,\n            inventarioDisponible,\n            precioUnitario: 25.99,\n            total: cantidad * 25.99,\n            status: 'InventarioValidado'\n          };\n        };\n      "},"handler":"index.handler","role":{"Fn::GetAtt":["ValidarInventarioLambdaServiceRole3FF9B68A","Arn"]},"runtime":"nodejs18.x"}}}}},"ProcesarPagoLambda":{"id":"ProcesarPagoLambda","path":"StepFunStack/ProcesarPagoLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"StepFunStack/ProcesarPagoLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"StepFunStack/ProcesarPagoLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"StepFunStack/ProcesarPagoLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Resource":{"id":"Resource","path":"StepFunStack/ProcesarPagoLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        exports.handler = async (event) => {\n          console.log('Procesando pago para:', JSON.stringify(event));\n          \n          // Recibir datos del paso anterior\n          const { productoId, cantidad, total, precioUnitario } = event;\n          \n          // Simular procesamiento de pago\n          const numeroTransaccion = 'TXN-' + Date.now();\n          const comision = total * 0.03; // 3% de comisión\n          const totalConComision = total + comision;\n          \n          // Simula error B (problema de pago) - no se reintenta\n          if (event.forceErrorB) {\n            console.log('ERROR FORZADO: ErrorB activado');\n            const err = new Error('Pago rechazado - error forzado para pruebas');\n            err.name = 'ErrorB';\n            throw err;\n          }\n          \n          // Verificación normal de límite\n          if (total > 1000) {\n            console.log('ERROR: Total excede límite');\n            const err = new Error('Pago rechazado - límite excedido');\n            err.name = 'ErrorB';\n            throw err;\n          }\n          \n          return {\n            productoId,\n            cantidad,\n            precioUnitario,\n            subtotal: total,\n            comision,\n            totalFinal: totalConComision,\n            numeroTransaccion,\n            metodoPago: 'Tarjeta de Crédito',\n            status: 'PagoProcesado'\n          };\n        };\n      "},"handler":"index.handler","role":{"Fn::GetAtt":["ProcesarPagoLambdaServiceRole4BDC4B72","Arn"]},"runtime":"nodejs18.x"}}}}},"EnviarConfirmacionLambda":{"id":"EnviarConfirmacionLambda","path":"StepFunStack/EnviarConfirmacionLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"StepFunStack/EnviarConfirmacionLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"StepFunStack/EnviarConfirmacionLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"StepFunStack/EnviarConfirmacionLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}}}},"Resource":{"id":"Resource","path":"StepFunStack/EnviarConfirmacionLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        exports.handler = async (event) => {\n          console.log('Enviando confirmación para:', JSON.stringify(event));\n          \n          // Recibir datos del paso anterior\n          const { productoId, cantidad, totalFinal, numeroTransaccion } = event;\n          \n          // Simular envío de confirmación\n          const numeroOrden = 'ORD-' + Date.now();\n          const fechaEntrega = new Date(Date.now() + 3 * 24 * 60 * 60 * 1000); // 3 días\n          \n          return {\n            numeroOrden,\n            numeroTransaccion,\n            productoId,\n            cantidad,\n            totalFinal,\n            fechaEntrega: fechaEntrega.toISOString(),\n            estadoOrden: 'Confirmada',\n            status: 'ConfirmacionEnviada',\n            mensaje: 'Su compra ha sido procesada exitosamente'\n          };\n        };\n      "},"handler":"index.handler","role":{"Fn::GetAtt":["EnviarConfirmacionLambdaServiceRole6FD7E86E","Arn"]},"runtime":"nodejs18.x"}}}}},"ManejoErroresLambda":{"id":"ManejoErroresLambda","path":"StepFunStack/ManejoErroresLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.212.0","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"StepFunStack/ManejoErroresLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"StepFunStack/ManejoErroresLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"StepFunStack/ManejoErroresLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"StepFunStack/ManejoErroresLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"StepFunStack/ManejoErroresLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":{"Ref":"ErrorTopicA0904A23"}}],"Version":"2012-10-17"},"policyName":"ManejoErroresLambdaServiceRoleDefaultPolicy6F2C6B48","roles":[{"Ref":"ManejoErroresLambdaServiceRoleD8C192CD"}]}}}}}}},"Resource":{"id":"Resource","path":"StepFunStack/ManejoErroresLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"zipFile":"\n        const AWS = require('aws-sdk');\n        const sns = new AWS.SNS();\n        exports.handler = async (event) => {\n          console.log('Manejando error:', JSON.stringify(event, null, 2));\n          \n          const errorInfo = {\n            timestamp: new Date().toISOString(),\n            originalInput: event,\n            errorDetails: event.error || 'Error no especificado',\n            stepFunction: 'CompraProductoStateMachine'\n          };\n          \n          await sns.publish({\n            TopicArn: process.env.TOPIC_ARN,\n            Message: JSON.stringify(errorInfo, null, 2),\n            Subject: 'Error en Step Function - Proceso de Compra',\n          }).promise();\n          \n          return { \n            status: 'Error Notificado',\n            errorHandled: true,\n            timestamp: errorInfo.timestamp\n          };\n        };\n      "},"environment":{"variables":{"TOPIC_ARN":{"Ref":"ErrorTopicA0904A23"}}},"handler":"index.handler","role":{"Fn::GetAtt":["ManejoErroresLambdaServiceRoleD8C192CD","Arn"]},"runtime":"nodejs18.x"}}}}},"Validar Inventario":{"id":"Validar Inventario","path":"StepFunStack/Validar Inventario","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.212.0"}},"Inventario Falló":{"id":"Inventario Falló","path":"StepFunStack/Inventario Falló","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Fail","version":"2.212.0"}},"Procesar Pago":{"id":"Procesar Pago","path":"StepFunStack/Procesar Pago","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.212.0"}},"Manejo de Error Pago":{"id":"Manejo de Error Pago","path":"StepFunStack/Manejo de Error Pago","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.212.0"}},"Enviar Confirmación":{"id":"Enviar Confirmación","path":"StepFunStack/Enviar Confirmación","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions_tasks.LambdaInvoke","version":"2.212.0"}},"Error Manejado":{"id":"Error Manejado","path":"StepFunStack/Error Manejado","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.Succeed","version":"2.212.0"}},"StepFunctionLogGroup":{"id":"StepFunctionLogGroup","path":"StepFunStack/StepFunctionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"StepFunStack/StepFunctionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"retentionInDays":731}}}}},"CompraProductoStateMachine":{"id":"CompraProductoStateMachine","path":"StepFunStack/CompraProductoStateMachine","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.StateMachine","version":"2.212.0","metadata":[]},"children":{"Role":{"id":"Role","path":"StepFunStack/CompraProductoStateMachine/Role","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.212.0","metadata":[]},"children":{"ImportRole":{"id":"ImportRole","path":"StepFunStack/CompraProductoStateMachine/Role/ImportRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.212.0","metadata":[]}},"Resource":{"id":"Resource","path":"StepFunStack/CompraProductoStateMachine/Role/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"states.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"StepFunStack/CompraProductoStateMachine/Role/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.212.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"StepFunStack/CompraProductoStateMachine/Role/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ValidarInventarioLambda9F94F936","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ValidarInventarioLambda9F94F936","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ProcesarPagoLambda98B14981","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProcesarPagoLambda98B14981","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["EnviarConfirmacionLambda1BB92ED9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["EnviarConfirmacionLambda1BB92ED9","Arn"]},":*"]]}]},{"Action":"lambda:InvokeFunction","Effect":"Allow","Resource":[{"Fn::GetAtt":["ManejoErroresLambdaF2983D3E","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ManejoErroresLambdaF2983D3E","Arn"]},":*"]]}]},{"Action":["logs:CreateLogDelivery","logs:GetLogDelivery","logs:UpdateLogDelivery","logs:DeleteLogDelivery","logs:ListLogDeliveries","logs:PutResourcePolicy","logs:DescribeResourcePolicies","logs:DescribeLogGroups"],"Effect":"Allow","Resource":"*"},{"Action":["xray:PutTraceSegments","xray:PutTelemetryRecords","xray:GetSamplingRules","xray:GetSamplingTargets"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"CompraProductoStateMachineRoleDefaultPolicy29224EAD","roles":[{"Ref":"CompraProductoStateMachineRole99286686"}]}}}}}}},"Resource":{"id":"Resource","path":"StepFunStack/CompraProductoStateMachine/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_stepfunctions.CfnStateMachine","version":"2.212.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::StepFunctions::StateMachine","aws:cdk:cloudformation:props":{"definitionString":{"Fn::Join":["",["{\"StartAt\":\"Validar Inventario\",\"States\":{\"Validar Inventario\":{\"Next\":\"Procesar Pago\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2},{\"ErrorEquals\":[\"ErrorA\"],\"IntervalSeconds\":2,\"MaxAttempts\":3,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"ErrorA\"],\"ResultPath\":\"$.error\",\"Next\":\"Inventario Falló\"}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ValidarInventarioLambda9F94F936","Arn"]},"\",\"Payload.$\":\"$\"}},\"Procesar Pago\":{\"Next\":\"Enviar Confirmación\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Catch\":[{\"ErrorEquals\":[\"States.ALL\"],\"ResultPath\":\"$.error\",\"Next\":\"Manejo de Error Pago\"}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ProcesarPagoLambda98B14981","Arn"]},"\",\"Payload.$\":\"$\"}},\"Enviar Confirmación\":{\"End\":true,\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["EnviarConfirmacionLambda1BB92ED9","Arn"]},"\",\"Payload.$\":\"$\"}},\"Manejo de Error Pago\":{\"Next\":\"Error Manejado\",\"Retry\":[{\"ErrorEquals\":[\"Lambda.ClientExecutionTimeoutException\",\"Lambda.ServiceException\",\"Lambda.AWSLambdaException\",\"Lambda.SdkClientException\"],\"IntervalSeconds\":2,\"MaxAttempts\":6,\"BackoffRate\":2}],\"Type\":\"Task\",\"OutputPath\":\"$.Payload\",\"Resource\":\"arn:",{"Ref":"AWS::Partition"},":states:::lambda:invoke\",\"Parameters\":{\"FunctionName\":\"",{"Fn::GetAtt":["ManejoErroresLambdaF2983D3E","Arn"]},"\",\"Payload.$\":\"$\"}},\"Error Manejado\":{\"Type\":\"Succeed\",\"Comment\":\"Error de pago manejado y notificado via SNS\"},\"Inventario Falló\":{\"Type\":\"Fail\",\"Comment\":\"Error después de agotar reintentos\",\"Cause\":\"Inventario insuficiente después de múltiples intentos\"}},\"TimeoutSeconds\":300}"]]},"loggingConfiguration":{"destinations":[{"cloudWatchLogsLogGroup":{"logGroupArn":{"Fn::GetAtt":["StepFunctionLogGroup5D8A5468","Arn"]}}}],"level":"ALL"},"roleArn":{"Fn::GetAtt":["CompraProductoStateMachineRole99286686","Arn"]},"tracingConfiguration":{"enabled":true}}}}}},"CDKMetadata":{"id":"CDKMetadata","path":"StepFunStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"StepFunStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.212.0"}},"Condition":{"id":"Condition","path":"StepFunStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.212.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"StepFunStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.212.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"StepFunStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.212.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}